# 3. λλ‹¤ ν‘ν„μ‹

## 3-1. λλ‹¤λ€ λ¬΄μ—‡μΈκ°€?


: μ΄λ¦„μ€ μ—†μ§€λ§ νλΌλ―Έν„° λ¦¬μ¤νΈ, λ°”λ””, λ°ν™ ν•μ‹μ„ κ°–λ” ν•¨μ

- νΉμ§•
  - **μµλ…** : μ΄λ¦„ μ—†λ” ν•¨μ
  - **ν•¨μ** : νΉμ • ν΄λμ¤μ— μΆ…μ†λμ§€ μ•λ”λ‹¤. static method
  - **μ „λ‹¬** : κ°’μ²λΌ μ‚¬μ© κ°€λ¥. μΌκΈ‰ μ‹λ―Ό. μΈμλ¥Ό ν†µν•΄ λ©”μ„λ“λ΅ μ „λ‹¬ν•  μ μλ‹¤. (μµλ… ν΄λμ¤μ™€μ κ³µν†µμ )
  - **κ°„κ²°** : μµλ… ν΄λμ¤λ³΄λ‹¤ κ°„κ²°
  
- μ¤νƒ€μΌ
  - ν‘ν„μ‹ μ¤νƒ€μΌ (expression style)
    ```
    (parameters) -> expression
    ```    

  - λΈ”λ΅ μ¤νƒ€μΌ (block style)
    ```
    (parameters) -> { statement; }
    ```

<details>
  <summary> expression π† statement </summary>

- expression (ν‘ν„μ‹, μμ‹)
    - μ–΄λ– ν• κ°’μ„ λ‚΄ν¬ν•κ³  μλ” κ²ƒ. κ°’μ²λΌ μ‚¬μ© κ°€λ¥ν• κ²ƒ
    - ex. μ, λ¬Έμμ—΄, μ‚°μ  μ‹, ν•¨μμ λ¦¬ν„΄ κ°’, λ³€μ λ“±
  ```
  (parameters) -> expression
  
  (parameters) -> {return expression;}
  ```
- statement (κµ¬λ¬Έ, μƒνƒ)
    - μ–΄λ– ν• μ‘μ—…μ„ μν–‰ν•λ” λ¨λ“  λ¬Έμ¥
    - ex. μ΅°κ±΄λ¬Έ, λ°λ³µλ¬Έ, μ¶λ ¥λ¬Έ, λ³€μ μ„ μ–Έ/ν• λ‹Ή λ“±
    - Javaλ” statementκ°€ μ•„λ‹λ©΄ μ½”λ“ λΈ”λ­ μ•μ—μ„ λ‹¨λ…μΌλ΅ μ“°μΌ μ μ—†λ‹¤.
    ```
    (parameters) -> { statement; }
    ```
    - ν• κ°μ void λ©”μ„λ“ νΈμ¶μ€ μ¤‘κ΄„νΈλ΅ κ°μ€ ν•„μ”κ°€ μ—†λ‹¤.
    ```java
    process(() -> System.out.println("Hello World"));
    ```

- ex. `age++;` μ€ expression μ΄λ©΄μ„ λ™μ‹μ— statement μ΄λ‹¤.

- [λ νΌλ°μ¤](https://gusdnd852.tistory.com/68)
</details>

## 3-2. μ–΄λ””μ—, μ–΄λ–»κ² λλ‹¤λ¥Ό μ‚¬μ©ν• κΉ?
- Q. μ–΄λ””μ—? 
  
  A. **ν•¨μν• μΈν„°νμ΄μ¤** λΌλ” λ¬Έλ§¥μ—μ„ μ‚¬μ©!

  - ν•¨μν• μΈν„°νμ΄μ¤κ°€ μ¬ μ μλ” λ¨λ“  μλ¦¬λ” λλ‹¤λ΅ λ€μ²΄κ°€ κ°€λ¥ν•λ‹¤
  - μ΅°κ±΄ : (ν•¨μν• μΈν„°νμ΄μ¤μ) μ¶”μƒλ©”μ„λ“μ μ‹κ·Έλ‹μ²μ™€ μΌμΉν•λ” λλ‹¤λ§ λ€μ²΄ κ°€λ¥ν•λ‹¤!!!

### ν•¨μν• μΈν„°νμ΄μ¤ (`@FunctionalInterface`)
- μ¤μ§ ν•λ‚μ μ¶”μƒ λ©”μ„λ“λ¥Ό κ°–λ” μΈν„°νμ΄μ¤

  (λ””ν΄νΈ λ©”μ„λ“κ°€ μ—¬λ¬ κ°μ—¬λ„ μ¶”μƒ λ©”μ„λ“λ§ ν•λ‚μ΄λ©΄ ν•¨μν• μΈν„°νμ΄μ¤λ‹¤.)
- ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ λ©”μ„λ“λ¥Ό νλΌλ―Έν„°ν™”ν•  μ μλ‹¤.
- ex. `Comparator`, `Runnable`, `Callable`, `ActionListener` μΈν„°νμ΄μ¤ λ“±


- λλ‹¤ ν‘ν„μ‹μΌλ΅ ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“ κµ¬ν„μ„ μ§μ ‘ μ „λ‹¬ν•  μ μλ‹¤. -> μ „μ²΄ ν‘ν„μ‹μ„ ν•¨μν• μΈν„°νμ΄μ¤μ μΈμ¤ν„΄μ¤λ΅ μ·¨κΈ‰ν•  μ μλ‹¤. = νλΌλ―Έν„°ν™”ν•  μ μλ‹¤. 

### ν•¨μ λ””μ¤ν¬λ¦½ν„° (function descriptor)
- λλ‹¤ ν‘ν„μ‹μ μ‹κ·Έλ‹μ²λ¥Ό μ„μ ν•λ” λ©”μ„λ“
- λλ‹¤ ν‘ν„μ‹μ μ‹κ·Έλ‹μ² == ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“ μ‹κ·Έλ‹μ²
- ν•¨μ λ””μ¤ν¬λ¦½ν„°λ” λλ‹¤ ν‘ν„μ‹μ€ ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“μ™€ κ°™μ€ μ‹κ·Έλ‹μ²λ¥Ό κ°–λ”λ‹¤.

## 3-3. [λλ‹¤ ν™μ© : μ‹¤ν–‰ μ–΄λΌμ΄λ“ ν¨ν„΄](https://github.com/StudyRecords/modern-java-in-action/blob/main/src/main/java/ch3/executeAroundPattern.java)
λλ‹¤ λ§λ“λ” λ°©λ²• & λλ‹¤ μ‚¬μ© λ°©λ²• μ•μ•„λ³΄κΈ°

μ‹¤ν–‰ μ–΄λΌμ΄λ“ ν¨ν„΄ : μ‹¤μ  μμ›μ„ μ²λ¦¬ν•λ” λ¶€λ¶„μ„ μ„¤μ •κ³Ό μ •λ¦¬ λ‘ κ³Όμ •μ΄ λ‘λ¬μ‹Έλ” ν•μ‹μ μ½”λ“

![](../image/ch3-3.png)
1. λ™μ‘ νλΌλ―Έν„°ν™” μ μ© μ „ : μ„¤μ •κ³Ό μ •λ¦¬ κ³Όμ •μ΄ λ°λ³µλλ‹¤.
2. μ„¤μ •, μ •λ¦¬ κ³Όμ •μ€ μ¬μ‚¬μ©ν•κ³  μ‘μ—…μ„ μν–‰ν•λ” λ©”μ„λ“λ§ λ‹¤λ¥Έ λ™μ‘μ„ μν–‰ν•λ„λ΅ λ…λ Ήν•μ = λ™μ‘ νλΌλ―Έν„°ν™”!
   1. ν•¨μν• μΈν„°νμ΄μ¤ μ •μ - `BufferedReaderProcessor`
      
      ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό νλΌλ―Έν„°λ΅ λ°›λ” `processFile()` λ©”μ„λ“ μ •μ
   2. ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤ μƒμ„± - `Processor`
   3. `processFile()` λ©”μ„λ“μ— `Processor`μ κ°μ²΄λ¥Ό μΈμλ΅ μ „λ‹¬
3. λλ‹¤ ν‘ν„μ‹ μ‚¬μ©
   - λλ‹¤ ν‘ν„μ‹μΌλ΅ ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“ κµ¬ν„μ„ μ§μ ‘ μ „λ‹¬ν•  μ μλ‹¤. (2-2λ² κ³Όμ • μƒλµ κ°€λ¥)

## 3-4. ν•¨μν• μΈν„°νμ΄μ¤ μ‚¬μ©
`java.util.function` ν¨ν‚¤μ§€μ— μλ” λ‹¤μ–‘ν• ν•¨μν• μΈν„°νμ΄μ¤ μ•μ•„λ³΄κΈ°
1. `Predicate <T>`
   - μ¶”μƒ λ©”μ„λ“ : `boolean test(T t);`
   - ν•¨μ λ””μ¤ν¬λ¦½ν„° : T -> boolean
   - T ν•μ‹μ κ°μ²΄λ¥Ό μ‚¬μ©ν•λ” λ¶λ¦¬μ–Έ ν‘ν„μ‹μ΄ ν•„μ”ν• μƒν™©μ—μ„ μ‚¬μ©
   
2. `Consumer <T>`
   - μ¶”μƒ λ©”μ„λ“ : `void accept(T t);`
   - ν•¨μ λ””μ¤ν¬λ¦½ν„° : T -> void
   - T ν•μ‹μ κ°μ²΄λ¥Ό μΈμλ΅ λ°›μ•„μ„ μ–΄λ–¤ λ™μ‘μ„ μν–‰ν•κ³  μ‹¶μ„ λ• μ‚¬μ©
   
3. `Function <T, R>`
   - μ¶”μƒ λ©”μ„λ“ : `R apply(T t);`
   - ν•¨μ λ””μ¤ν¬λ¦½ν„° : T -> R
   - μ…λ ¥μ„ μ¶λ ¥μΌλ΅ λ§¤ν•‘ν•λ” λλ‹¤λ¥Ό μ •μν•  λ• μ‚¬μ© (ex. Apple κ°μ²΄μ—μ„ λ¬΄κ² μ •λ³΄ μ¶”μ¶)

- μ λ„¤λ¦­ νλΌλ―Έν„°μ—λ” κΈ°λ³Έν•(primitive type) μ‚¬μ© λ¶κ°€λ¥. μ°Έμ΅°ν•(reference type)λ§ μ‚¬μ© κ°€λ¥ν•λ‹¤.
 1. μ¤ν†  λ°•μ‹± κΈ°λ¥μ„ μ‚¬μ©ν•μ!
    - λ°•μ‹± : κΈ°λ³Έν•μ„ μ°Έμ΅°ν•μΌλ΅ λ³€ν™ν•λ” κΈ°λ¥
    - μ–Έλ°•μ‹± : μ°Έμ΅°ν•μ„ κΈ°λ³Έν•μΌλ΅ λ³€ν™ν•λ” λ°λ€ λ™μ‘ κΈ°λ¥
    - μ¤ν†  λ°•μ‹± : λ°•μ‹±κ³Ό μ–Έλ°•μ‹±μ΄ μλ™μΌλ΅ μ΄λ£¨μ–΄μ§€λ” κΈ°λ¥
  
    λ‹¨μ  : λΉ„μ© μ†λ¨ (λ°•μ‹±ν• κ°’μ€ ν™μ— μ €μ¥λλ‹¤ β†’ λ©”λ¨λ¦¬ μ†λΉ„, λ©”λ¨λ¦¬ νƒμƒ‰ κ³Όμ • ν•„μ”)
  
  2. κΈ°λ³Έν•μ„ μ‚¬μ©ν•λ” νΉλ³„ν• ν•¨μν• μΈν„°νμ΄μ¤ μ‚¬μ©ν•κΈ°
     - `IntPredicate` μΈν„°νμ΄μ¤
        
       μ¶”μƒ λ©”μ„λ“ : `boolean test(int t)` - λ°•μ‹± μ—†μ


![](../image/ch3-4.png)

## 3-5. ν•μ‹ κ²€μ‚¬, ν•μ‹ μ¶”λ΅ , μ μ•½
μ»΄νμΌλ¬κ°€ λλ‹¤μ ν•μ‹μ„ μ–΄λ–»κ² ν™•μΈν•λ”μ§€, ν”Όν•΄μ•Ό ν•  μ‚¬ν•­μ€ λ¬΄μ—‡μΈμ§€

### ν•μ‹ κ²€μ‚¬
**λ€μƒν•μ‹μΌλ΅ λλ‹¤μ μ‹κ·Έλ‹μ²λ¥Ό ν™•μΈ**
- λλ‹¤κ°€ μ‚¬μ©λλ” λ¬Έλ§¥(context)μ„ λ³΄κ³  λλ‹¤μ ν•μ‹(type)μ„ μ¶”λ΅ ν•  μ μλ‹¤.

  (ν• λ‹Ήλ¬Έ μ½ν…μ¤νΈ, λ©”μ„λ“ νΈμ¶ μ½ν…μ¤νΈ, ν•λ³€ν™ μ½ν…μ¤νΈ λ“±μΌλ΅ λλ‹¤ ν‘ν„μ‹μ ν•μ‹μ„ μ¶”λ΅ ν•  μ μλ‹¤.)
- λ€μƒ ν•μ‹(target type) : μ–΄λ–¤ λ¬Έλ§¥μ—μ„ κΈ°λ€λλ” λλ‹¤ ν‘ν„μ‹μ ν•μ‹ (κΈ°λ€ ν•μ‹). λλ‹¤μ ν‘ν„μ‹μ΄ μ‚¬μ©λ μ½ν…μ¤νΈ
> Q. λ€μƒ ν•μ‹κ³Ό ν•¨μ λ””μ¤ν¬λ¦½ν„°μ μ°¨μ΄μ ?
> (112p. λ€μƒ ν•μ‹μ„ μ΄μ©ν•΄μ„ ν•¨μ λ””μ¤ν¬λ¦½ν„°λ¥Ό μ• μ μλ‹¤.)

- λλ‹¤ ν•μ‹ κ²€μ‚¬ κ³Όμ •
  1. λλ‹¤ μλ¦¬μ— μ¬ ν•¨μν• μΈν„°νμ΄μ¤ ν™•μΈ
  2. ν•΄λ‹Ή μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“ ν™•μΈ (λ€μƒ ν•μ‹ ν™•μΈ)
  3. νλΌλ―Έν„°μ νƒ€μ…κ³Ό λ¦¬ν„΄ νƒ€μ… ν™•μΈ 
- λ™μΌν• λλ‹¤ ν‘ν„μ‹μ„ ν•¨μ λ””μ¤ν¬λ¦½ν„°κ°€ μΌμΉν•λ” λ‹¤λ¥Έ ν•¨μν• μΈν„°νμ΄μ¤λ΅ μ‚¬μ©ν•  μ μλ‹¤.

### ν•μ‹ μ¶”λ΅ 
**λλ‹¤μ μ‹κ·Έλ‹μ²λ΅ ν•¨μν• μΈν„°νμ΄μ¤ μ¶”λ΅ **
- λ€μƒ ν•μ‹μ„ μ΄μ©ν•΄μ„ ν•¨μ λ””μ¤ν¬λ¦½ν„°λ¥Ό μ• μ μμΌλ―€λ΅ μλ°” μ»΄νμΌλ¬λ” λλ‹¤μ μ‹κ·Έλ‹μ²(νλΌλ―Έν„° ν•μ‹κ³Ό λ¦¬ν„΄ νƒ€μ…)λ¥Ό μ¶”λ΅ ν•  μ μλ‹¤.
    
  ν•μ‹μ„ ν¬ν•¨ν• μ§€ λ°°μ¬ν• μ§€λ” κ°€λ…μ„±μ„ ν–¥μƒμ‹ν‚¤λ” λ°©μ‹μΌλ΅ κ·Έλ•κ·Έλ• μ„ νƒν•κΈ°

### μ μ•½
- λλ‹¤ ν‘ν„μ‹μ—μ„ μ‚¬μ©ν•  μ μλ” μμ  λ³€μ
  - finalλ΅ μ„ μ–Έλκ±°λ‚, finalλ΅ μ„ μ–Έλ λ³€μμ²λΌ μ‚¬μ©λλ” **μ§€μ—­ λ³€μ**
  - **μΈμ¤ν„΄μ¤ λ³€μ** (μ¤λ λ“κ°€ κ³µμ ν•λ” ν™ μμ—­μ— μ΅΄μ¬ν•λ―€λ΅ μ μ•½X)
> Q. μ§€μ—­λ³€μ, μμ λ³€μμ κ΄€κ³„, μ°¨μ΄μ 

## 3-6. λ©”μ„λ“ μ°Έμ΅°

### κΈ°μ΅΄μ κµ¬ν„λ λ©”μ„λ“ μ¬ν™μ©
- λ©”μ„λ“ μ°Έμ΅°λ¥Ό μ΄μ©ν•λ©΄ κΈ°μ΅΄μ— μ •μλ λ©”μ„λ“λ¥Ό μ¬ν™μ©ν•μ—¬ λλ‹¤μ²λΌ μ „λ‹¬, μ‚¬μ©ν•  μ μλ‹¤.
- μ‹¤μ  λ©”μ„λ“λ¥Ό νΈμ¶ν•λ” κ²ƒμ€ μ•„λ‹λ―€λ΅ κ΄„νΈλ” ν•„μ” μ—†λ‹¤.

1. μ •μ  λ©”μ„λ“ μ°Έμ΅°
   
    `Integer::parseInt`
2. λ‹¤μ–‘ν• ν•μ‹μ μΈμ¤ν„΄μ¤ λ©”μ„λ“ μ°Έμ΅°
   
    `String::length`
3. κΈ°μ΅΄ κ°μ²΄μ μΈμ¤ν„΄μ¤ λ©”μ„λ“ μ°Έμ΅°
   - ν„μ΅΄ν•λ” μ™Έλ¶€ κ°μ²΄μ λ©”μ„λ“λ¥Ό νΈμ¶ν•  λ• μ‚¬μ©λλ‹¤.
    `expensiveTransaction::getValue`

![](../image/ch3-6.png)
> Q. 2λ²κ³Ό 3λ² μ ν•μ λ©”μ„λ“ μ°Έμ΅°λ¥Ό μ–΄λ–¤ μƒν™©μ—μ„ ν™μ©ν•  μ μλ”μ§€ κµ¬λ¶„
> 2. λλ‹¤μ νλΌλ―Έν„°λ΅ κ°μ²΄λ¥Ό λ°›λ” κ²½μ° (ν„μ΅΄ν•μ§€ μ•λ” κ°μ²΄)
> 3. μ΄λ―Έ κ°μ²΄λ¥Ό ν• λ‹Ήλ°›μ€ μ§€μ—­λ³€μκ°€ μ΅΄μ¬ν•λ” κ²½μ° (νλΌλ―Έν„Έλ΅ μ „λ‹¬λ°›μ§€ μ•λ” κ²½μ°)

### μƒμ„±μ μ°Έμ΅°
μ£Όλ΅ μ‚¬μ©ν•λ” ν•¨μν• μΈν„°νμ΄μ¤
- `Supplier <T>` : void -> T
- `Function <T, R>` : T -> R
    
  ex. μ‚¬κ³Ό λ¬΄κ² (Integer) -> Apple
- `BiFunction <T, U, R>` : (T, U) -> R 
    
  ex. μ‚¬κ³Ό λ¬΄κ², μƒ‰κΉ” (Integer, Color) -> Apple 

## 3-7. [λλ‹¤, λ©”μ„λ“ μ°Έμ΅° ν™μ©ν•κΈ°](https://github.com/StudyRecords/modern-java-in-action/blob/main/src/main/java/ch3/Main.java)
ex. μ‚¬κ³Ό λ¦¬μ¤νΈ μ •λ ¬
1. μ½”λ“ μ „λ‹¬ (λ™μ‘ νλΌλ―Έν„°ν™”) - μ „λµ ν¨ν„΄ μ‚¬μ©
   - sort λ©”μ„λ“μ— μ •λ ¬ μ „λµμ„ μ „λ‹¬ν•κΈ° μ„ν•΄μ„  **λ™μ‘ νλΌλ―Έν„°ν™”**κ°€ ν•„μ”ν•λ‹¤.
   - `void sort(Comparator<? super E> c)`
2. μµλ… ν΄λμ¤ μ‚¬μ©
3. λλ‹¤ ν‘ν„μ‹ μ‚¬μ©
4. λ©”μ„λ“ μ°Έμ΅° μ‚¬μ©

β†’ μ½”λ“κ°€ κ°„κ²°ν•΄μ§ + μ½”λ“μ μλ―Έλ¥Ό λ…ν™•ν•κ² μ „λ‹¬ν•  μ μλ‹¤.


## 3-8. λλ‹¤ ν‘ν„μ‹μ„ μ΅°ν•©ν•  μ μλ” μ μ©ν• λ©”μ„λ“
- μ—¬λ¬ ν•¨μν• μΈν„°νμ΄μ¤λ” μ ν‹Έλ¦¬ν‹° λ©”μ„λ“λ¥Ό μ κ³µ (λ””ν΄νΈ λ©”μ„λ“)

  β†’ μ—¬λ¬ κ°μ λλ‹¤ ν‘ν„μ‹μ„ μ΅°ν•©ν•΄μ„ λ³µμ΅ν• λλ‹¤ ν‘ν„μ‹μ„ λ§λ“¤ μ μλ‹¤.

1. Comparator μ΅°ν•©
   - `Comparator.comparing()` : Function<T, R> β†’ Comparator<T> 
   - `reversed()` : void β†’ Comparator<T>
     
        μ—­μ •λ ¬μ— μ‚¬μ©
   - `thenComparing()` : Comparator<T> β†’ Comparator<T>

     μ²«λ²μ§Έ κΈ°μ¤€μ΄ κ°™μ„ λ• μ μ©ν•λ” λ‘λ²μ§Έ κΈ°μ¤€
   ```
    inventory.sort(comparing(Apple::getWeight)
            .reversed()
            .thenComparing(Apple::getCountry));
    ```

2. Predicate μ΅°ν•©
   - `negate()`, `and()`, `or()` : void β†’ Predicate<T>

3. Function μ΅°ν•©
   - `andThen()`, `compose()` : Function<T, R> β†’ Function<T, R>
     
     Functionμ„ μ μ©μ‹ν‚¨ κ²°κ³Όμ— λ‹¤λ¥Έ ν•¨μλ¥Ό μ μ© (μμ„ μ§€μ •)
   ```java
    // Function<T, R> μ κµ¬ν„ κ°μ²΄ f, g
   
    f.andThen(g);        // fν•¨μλ¥Ό μ μ©ν• κ²°κ³Όλ¥Ό g ν•¨μ μ μ© == g(f(x))
    f.compose(g);        // gν•¨μλ¥Ό μ μ©ν• κ²°κ³Όλ¥Ό f ν•¨μμ— μ μ© == f(g(x))
    ```
